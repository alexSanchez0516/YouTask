async function showMessagesTask(){const e=new FormData;let t=getParameterByName("id");e.append("id_task",t);try{const t=await fetch("http://127.0.0.1:8080/api/showMessagesTask",{method:"POST",body:e});buildMessagesTask(await t.json())}catch(e){console.log(e)}}function buildMessagesTask(e){let t="";const n=document.querySelector("#container__msgs_task");e.forEach(e=>{t+=`\n    <li class="mt-4">\n        <div class="media activity-item d-flex">\n            <a href="#" class="pull-left w-20">\n                <img src="/build/img/${e.avatar}" alt="Avatar" class="w-50 avatar rounded-circle m-2">\n            </a>\n            <div class="media-body">\n                <strong>${e.username}</strong><br>\n                <small class="text-muted">${e.create_at}</small>\n                <a title="Eliminar" data-id="${e.id}" class="btn btn-link text-danger btn-remove"><i onclick="deleteCommentTask(${e.id});" class="fa-solid fa-trash-can"></i></a>\n                <div class="well bg-messages_response rounded p-2">\n                    ${e.msg}\n                </div>\n            </div>\n        </div>\n    </li>\n    \n    `}),n.innerHTML=t}async function sendMessageTask(){const e=new FormData;let t=getParameterByName("id");e.append("id_task",t);const n=document.querySelector("#msgTask").value;if(validateMessage(n)){e.append("msg",n);try{const t=await fetch("http://127.0.0.1:8080/api/sendCommentChat",{method:"POST",body:e});await t.json()?(Swal.fire("Enviado correctamente","","success"),$("#msgTask").val(""),showMessagesTask()):Swal.fire({icon:"error",title:"Oops...",text:"¡Ha ocurrido un error!"})}catch(e){console.log(e)}}}function validateMessage(e){return e.trim().length>0}async function dissmisAdmin(e){const t=new FormData;let n=getParameterByName("id");t.append("id_project",n),t.append("id_user",e);if((await Swal.fire({title:"Eliminar",text:"¿Estás seguro de que ya no sea admnistrador?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1f9bcf",cancelButtonColor:"#d9534f",cancelButtonText:"No",confirmButtonText:"Si"})).value)try{const e=await fetch("http://127.0.0.1:8080/api/dismisAdminByProject",{method:"POST",body:t});await e.json()?(Swal.fire("Convertido en colaborador","","success"),getAllMembersProject()):Swal.fire({icon:"error",title:"Oops...",text:"¡Ha ocurrido un error!"})}catch(e){console.log(e)}}async function dataMessageGeneral(e){document.querySelector("#send_msg_members_page");$("#send_msg_members_page").click(t=>{t.preventDefault(),t.stopImmediatePropagation(),$("#msg_page_members").val().length>0?$.post("http://127.0.0.1:8080/api/chat/app/send-message",{receiver:e,message:$("#msg_page_members").val()},e=>{e?Swal.fire("Mensaje enviado correctamente","","success"):Swal.fire({icon:"error",title:"Oops...",text:"¡Ha ocurrido un error!"}),$("#msg_page_members").val("")}):Swal.fire({icon:"error",title:"Oops...",text:"¡Texto vacio!"})})}async function converAdmin(e){try{if(!(await Swal.fire({title:"Eliminar",text:"¿Estás seguro de que quieres hacerle admnistrador?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1f9bcf",cancelButtonColor:"#d9534f",cancelButtonText:"No",confirmButtonText:"Si"})).value)return;let t="http://127.0.0.1:8080/api/insertAdminByProject";const n=new FormData;let a=getParameterByName("id");n.append("id_user",e),n.append("id_project",a);const s=await fetch(t,{method:"POST",body:n});await s.json()?(Swal.fire("Convertido en administrador","","success"),getAllMembersProject()):Swal.fire({icon:"error",title:"Oops...",text:"¡Ha ocurrido un error!"})}catch(e){console.log(e)}}async function deleteMemberProject(e){await deleteAny(e,"Members_Projects"),window.location.reload()}function getAllMembersProject(){let e="",t=getParameterByName("id");const n=document.querySelector("#container__members__pag");let a=Number(n.getAttribute("data-id"));const s=document.querySelector("#current_id_user");let o=Number(s.getAttribute("data-id"));const i=document.querySelector("#title_team");getMembers(t).then(t=>{t.forEach(t=>{e+=`\n      <div class="col-lg-4 col-md-6">\n                <div class="team-item">\n                    <div class="team-img">\n                        <img src="/build/img/${t.avatar}" alt="team Image">\n                        <div class="normal-text">\n                            <h4 class="team-name">${t.username}</h4>\n                            <span class="subtitle">${null!=t.id_admin?"Administrador":t.id==a?"Creador":"Colaborador"}</span>\n                        </div>\n                    </div>\n                    <div class="team-content">\n                        <div class="display-table">\n                            <div class="display-table-cell">\n                                <div class="share-icons">\n                                    <div class="border"></div>\n                                    <ul class="team-social icons-1">\n\n                                    `,o!=t.id&&(e+=` \n                                        <li><a onclick="dataMessageGeneral(${t.id});" title="Enviar mensaje" data-bs-toggle="modal" data-bs-target="#modal_send_message" class="social-icon"><i class="fa-solid fa-message"></i></a>\n                                        </li> \n      `),e+=`\n                                        <li><a href="/seguidor?id=${t.id}" title="Ver Perfil" class="social-icon"><i class="fa-solid fa-magnifying-glass"></i></a>\n                                        </li>\n                                    </ul>\n\n                                    <ul class="team-social icons-2">\n                                        <li><a  onclick='deleteMemberProject(${t.id})' title="Eliminar Integrante" class="social-icon"><i class="fa-solid fa-trash-can"></i></a>\n                                        </li>\n                                        \n                                       `,null!=t.id_admin?e+=`\n        <li><a onclick="dissmisAdmin(${t.id})" title="Quitar administrador" class="social-icon"><i class="fa-solid fa-user-minus"></i></a>\n        </li>\n\n        `:t.id!=a&&(e+=`\n        <li><a onclick="converAdmin(${t.id})" title="Convertir en administrador" class="social-icon"><i class="fa-solid fa-plus"></i></a>\n        </li>\n\n        `),e+=`\n                                    </ul>\n                                </div>\n                                <div class="team-details">\n                                    <h4 class="team-name mt-2">\n                                        <a href="speakers-single.html">${i.textContent}</a>\n                                    </h4>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n      \n      `}),n.innerHTML=e})}async function deleteCommentProject(e){await deleteAny(e,"msgProjects"),getMessagesProjects()}async function deleteCommentTask(e){await deleteAny(e,"msgTask"),showMessagesTask()}async function sendInvitationProject(e){const t=new FormData;let n=getParameterByName("id");t.append("id_project",n),t.append("id_user",e);const a=await fetch("http://127.0.0.1:8080/api/sendInvitationProject",{method:"POST",body:t});await a.json()?(Swal.fire("Invitacion enviada correctamente","","success"),getMembers(n)):Swal.fire({icon:"error",title:"Oops...",text:"¡Ya tiene una invitacion pendiente!"})}function searchMembers(){document.querySelector("#member_project"),new FormData;let e=getParameterByName("id"),t="";$("#member_project").keyup(()=>{let n=$("#member_project").val();$.ajax({url:"http://127.0.0.1:8080/api/getFriendsNotMembersByGroup",type:"POST",data:{id_project:e,nameSearch:n},success:e=>{if(!e.error){t="",$("#content__profiles").html(t);JSON.parse(e).forEach(e=>{t+=`<div class="d-flex flex-column align-items-center ">\n            <img src="/build/img/${e.avatar}" class="img-responsive rounded-circle w-20" alt="avatar" />\n            <span>ID: ${e.id}</span>\n\n            <span class="w-75 text-center">Nombre: <span class="text-primary">${e.username}</span></span>`,null!=e.description&&(t+=`\n        <span class="w-75 text-center">Descripción: <span class="text-primary">${e.description}</span></span>`),null!=e.rol&&(t+=`\n        <span class="w-75 text-center">Rol: <span class="text-primary">${e.rol}</span></span>`),t+=` <a href="/seguidor?id=${e.id}">Ver perfil</a>`,t+=`<button type="button" onclick="sendInvitationProject(${e.id});" class="btn btn-primary my-2">\n                                      Invitar\n                                      </button>\n                                      <hr/>`}),$("#content__profiles").html(t)}}})})}function loadBtnUploadFileProject(){const e=document.querySelector("#image_avatar");bnt__upload__Files=document.querySelector("#bnt__upload__Files"),e.addEventListener("change",t=>{const n=e.files,a=Array.from(n);a.length>0&&a.forEach(e=>{e.size>3145728?Swal.fire({icon:"error",title:"Oops...",text:"¡Te excedes en tamaño(3MB MAX)!"}):(bnt__upload__Files.classList.add("show"),console.log("add"))})})}async function deleteFileByProject(e){const t=new FormData;let n=getParameterByName("id");t.append("name",e),t.append("id",n);if(!(await Swal.fire({title:"Eliminar",text:"¿Estás seguro de que quieres eliminar este item?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1f9bcf",cancelButtonColor:"#d9534f",cancelButtonText:"No",confirmButtonText:"Si, eliminarlo"})).value)return;const a=await fetch("http://127.0.0.1:8080/api/deleteFileByProject",{method:"POST",body:t});if(await a.json()){let e;await Swal.fire({title:"Eliminando",html:"Se está eliminando, por favor espere",timer:1e3,timerProgressBar:!0,didOpen:()=>{Swal.showLoading();const t=Swal.getHtmlContainer().querySelector("b");e=setInterval(()=>{t.textContent=Swal.getTimerLeft()},1e3)},willClose:()=>{clearInterval(e)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")}),window.location.href=window.location.href}else Swal.fire({icon:"error",title:"Oops...",text:"¡Algo salió mal!"})}function validateDataTask(){let e=!0;const t=new FormData;let n=document.querySelector("#name__task__by__project").value,a=document.querySelector("#description__task__by__project").value,s=document.querySelector("#pririty__task__by__project").value,o=document.querySelector("#projectID").value,i=document.querySelector("#create_end_task__by__project").value,r=document.querySelector("#adminID").value;console.log(r),n.trim().length<3&&(e=!1,Swal.fire({icon:"error",title:"Oops...",text:"¡Nombre invalido!"})),a.trim().length<3&&(e=!1,Swal.fire({icon:"error",title:"Oops...",text:"Descripción inválida!"})),e&&(t.append("name",n),t.append("description",a),t.append("priority",s),t.append("projectID",o),t.append("date_end",i),t.append("adminID",r),sendTaskByProject(t))}async function sendTaskByProject(e){const t=await fetch("http://127.0.0.1:8080/api/addTaskByProject",{method:"POST",body:e}),n=await t.json();n?(Swal.fire("Creado correctamente","","success"),getListByProject()):Swal.fire({icon:"error",title:"Oops...",text:"¡Algo salió mal!"}),console.log(n)}async function sendMessagesProject(){let e=document.querySelector("#msg_project").value,t=getParameterByName("id");const n=new FormData;n.append("msg",e),n.append("project_id",t);const a=await fetch("http://127.0.0.1:8080/api/sendMessageProject",{method:"POST",body:n});await a.json()?getMessagesProjects():Swal.fire({icon:"error",title:"Oops...",text:"¡Algo salió mal!"})}async function getMessagesProjects(){const e=new FormData;let t=Number(getParameterByName("id"));e.append("id",t);const n=await fetch("http://127.0.0.1:8080/api/getMessagesProjects",{method:"POST",body:e});buildMessageProject(await n.json())}function buildMessageProject(e){const t=document.querySelector("#project__msg__list");let n='<h3 class="text-center">Mensajes</h3>';e.forEach(e=>{n+=`\n    <li class="mt-4">\n        <div class="media activity-item d-flex">\n            <a href="#" class="pull-left w-20">\n                <img src="/build/img/${e.avatar}" alt="Avatar" class="w-50 avatar rounded-circle m-2">\n            </a>\n            <div class="media-body">\n                <strong>${e.username}</strong><br>\n                <small class="text-muted">${e.create_at}</small>\n                <a title="Eliminar" data-id="${e.id}" class="btn btn-link text-danger btn-remove"><i onclick="deleteCommentProject(${e.id});" class="fa-solid fa-trash-can"></i></a>\n                <div class="well bg-messages_response rounded p-2">\n                    ${e.msg}\n                </div>\n            </div>\n        </div>\n    </li>\n    \n    `}),t.innerHTML=n}async function deleteListProject(e){await deleteAny(e,"Tasks"),getListByProject()}async function getListByProject(){let e=getParameterByName("id");const t=new FormData;t.append("id",e);const n=await fetch("http://127.0.0.1:8080/api/to-do-list",{method:"POST",body:t});buildTodoList(await n.json())}function buildTodoList(e){const t=e.filter(e=>"EN PROCESO"===e.state);let n="";const a=document.querySelector("#todo__list");t.forEach(e=>{n+=`\n    <li>\n        <a class="text-dark" href="/tarea?id=${e.id}"><span class="todo-text"><i class="mx-2 my-2 fa-solid fa-list-check"></i>${e.name}</span></a>\n    </li>\n\n    `}),a.innerHTML=n}async function showContacts(){const e=document.querySelector("#container__users");try{const t="http://127.0.0.1:8080/api/friends",n=await fetch(t);let a="";(await n.json())[1].forEach(t=>{a+=`\n          <li class="follower__contact my-3  d-flex" data-chat="${t.id}">\n            <div class="user  w-20">\n                <img src="/build/img/${t.avatar}" data-avatar="/build/img/${t.avatar}" class="raidius_max w-100 " alt="Retail Admin">\n            </div>\n            <p class="name-time align-self-center text-dark mx-2">\n                <span class="name_users_on_chat">${t.username}</span> \n            </p>\n\n          </li>\n        `,e.innerHTML=a}),showChatOnClick()}catch(e){console.log(e)}}function showChatOnClick(){document.querySelectorAll(".follower__contact").forEach(e=>{e.addEventListener("click",t=>{setMessages(e,0),setInterval(()=>{setMessages(e,0)},20500)})})}function setMessages(e,t){const n=document.querySelector("#selected-user"),a=document.querySelector("#chat__box__container");let s="";if(a.innerHTML=s,$("#msg").val(""),t!=e.dataset.chat){let o=Number(e.getAttribute("data-chat")),i="http://127.0.0.1:8080/api/chat/app";$.post(i,{idSelected:o},o=>{const i=JSON.parse(o);let r=e.children[1].children[0].textContent,c=e.children[0].children[0].getAttribute("data-avatar");n.textContent=r,i.forEach(e=>{e.isGroup;let t=1==e.isSender;s+=t?`\n            <li class="chat-left d-flex flex-column flex-md-row flex align-items-center bg-messages_sender border rounded p-2 my-2">\n                <div class="chat-avatar w-50">\n                    <img src="${c}"  class="raidius_max w-50" alt="Retail Admin">\n                    <p class="chat-name">Tú</p>\n                </div>\n                <div class="chat-text d-flex flex-column mb-2 mx-2 w-100">\n                  <span>${e.create_at}</span>\n                  <p class="m-2">${e.msg}</p>\n                </div>\n            </li>\n             `:` \n                <li class="chat-right d-flex flex-column flex-md-row flex p-2 bg-messages_response border rounded justify-content-end my-2">\n                    <div class="chat-text d-flex flex-column align-items-center justify-content-center w-100">\n                      <span>${e.create_at}</span>\n                      <p class="m-2">${e.msg}</p>\n                    </div>\n                    <div class="chat-avatar mx-5 w-50">\n                        <img src="${c}" class="raidius_max w-50" alt="Retail Admin">\n                        <p class="chat-name">${r}</p>\n                    </div>\n                </li>\n            `,s+="<hr />"}),t=e.dataset.chat,a.setAttribute("data-id",e.dataset.chat),a.innerHTML=s,$("#send_message").addClass("show")})}}function sendMessage(e){const t=$("#chat__box__container").attr("data-id");$.post("http://127.0.0.1:8080/api/chat/app/send-message",{receiver:t,message:e},e=>{const t=document.querySelector("#chat__box__container").getAttribute("data-id");document.querySelectorAll(".follower__contact").forEach(e=>{e.getAttribute("data-chat")==t&&setMessages(e,0)})})}function createSkill(){let e=$("#skill_name").val();console.log(e);const t=document.querySelector("#btn_close_skill_user"),n=document.querySelector("#skills_data");$.post("http://127.0.0.1:8080/api/create-skill",{skill:e},e=>{JSON.parse(e)&&(t.click(),n.remove(),getSkills(),Swal.fire("Creado correctamente","","success"))})}function getSkills(){const e=document.createElement("select");e.setAttribute("id","skills_data"),e.setAttribute("name","skills[]"),e.setAttribute("multiple","multiple"),e.classList.add("form-select");const t=document.querySelector("#container_skills");let n="";$.get("http://127.0.0.1:8080/api/get-skills",a=>{JSON.parse(a).forEach(a=>{$.post("http://127.0.0.1:8080/api/check-skill",{skill:a.id},s=>{if(null!=s){const e=JSON.parse(s);n+=null!=e?`<option value="${a.id}" selected>${a.name}</option>`:`<option value="${a.id}" >${a.name}</option>`}e.innerHTML=n,t.appendChild(e)})})})}function openFileDialog(){document.querySelector("#image_avatar").click()}function previewImg(){if("/editar-perfil"==window.location.pathname){const e=document.querySelector("#current_img"),t=document.querySelector("#image_avatar");t.addEventListener("change",()=>{const n=t.files;if(n.length>0){const t=URL.createObjectURL(n[0]);e.src=t}})}}function storage(){}function deleteNotifications(){if(null!=document.querySelectorAll(".fa-xmark")){document.querySelectorAll(".fa-xmark").forEach(e=>{e.addEventListener("click",()=>{e.parentElement.remove()})})}}function getRequestsFollow(){let e=window.location.pathname;if(null==["/","/inicio","/login","/registro","/contacto"].find(t=>t==e)){let e="http://127.0.0.1:8080/api/show-requests-followers";const t=document.querySelector("#wrap__notifications");$.get(e,e=>{const n=JSON.parse(e);let a="";n.forEach(e=>{a+=`<div class="d-flex justify-content-between">\n        <span>Solicitud de Seguimiento de <a class=" " href="/seguidor?id=${e.id}">${e.username}</a></span>\n        <i class="fa-solid fa-xmark m-2"></i>\n        <button type="button" onclick="accept_request_follower(${e.id_request});" class="btn btn-primary m-2">Aceptar</button>\n        <button type="button" onclick="reject_request_follower(${e.id_request});" data-bs-dismiss="modal" class="btn btn-danger m-2">Denegar</button>\n      </div>  <hr/>`}),t.innerHTML=a,deleteNotifications()})}}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}async function getEntityByName(e){new FormData;$("#search").keyup(()=>{if($("#search").val()){let t=$("#search").val();console.log(t),"Projects"===e?getProjectsPaginate(null,t):getTasksPaginate(null,t)}})}async function getProjectsPaginate(e=null,t=null){const n=new FormData;let a=getParameterByName("page"),s=getParameterByName("limit");null!=e&&n.append("filter",e),null!=t&&n.append("value",t),n.append("page",a),n.append("limit",s);const o=await fetch("http://127.0.0.1:8080/api/get-projects-paginate",{method:"POST",body:n});buildProjects((await o.json()).data)}async function getTasksPaginate(e=null,t=null){let n=window.location.pathname;const a=new FormData;let s=getParameterByName("page"),o=getParameterByName("limit"),i=0;"/proyecto"==n&&(i=getParameterByName("id"),a.append("id_project",i)),null!=e&&a.append("filter",e),null!=t&&a.append("value",t),a.append("page",s),a.append("limit",o);const r=await fetch("http://127.0.0.1:8080/api/get-tasks-paginate",{method:"POST",body:a});buildTasks((await r.json()).data)}async function checkAdminOrCreator(){}async function deleteAny(e,t){{const n=new FormData;let a="http://127.0.0.1:8080/api/delete",s=window.location.pathname;n.append("table",t),"/miembros-proyecto"==s?n.append("id_user",e):n.append("id",e);if(!(await Swal.fire({title:"Eliminar",text:"¿Estás seguro de que quieres eliminar este item?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1f9bcf",cancelButtonColor:"#d9534f",cancelButtonText:"No",confirmButtonText:"Si, eliminarlo"})).value)return;const o=await fetch(a,{method:"POST",body:n});await o.json()?Swal.fire("Eliminado correctamente","","success"):Swal.fire({icon:"error",title:"Oops...",text:"¡Algo salió mal!"})}}function buildTasks(e){let t="";const n=document.querySelector("#content__tasks");e.forEach(e=>{null!=e&&(t+="\n      <tr>\n      ","ALTA"==e.priority&&(t+=`<td class="bg-danger text-white border rounded">${e.priority}</td>`),"BAJA"==e.priority&&(t+=`<td class="bg-primary text-white border rounded">${e.priority}</td>`),"MEDIA"==e.priority&&(t+=`<td class="bg-secondary text-white border rounded">${e.priority}</td>`),t+=`<td>${e.name}</td>`,"EN PROCESO"==e.state&&(t+=`<td class="bg-secondary text-white border rounded">${e.state}</td>`),"REALIZADO"==e.state&&(t+=`<td class="bg-success text-white border rounded">${e.state}</td>`),"CANCELADO"==e.state&&(t+=`<td class="bg-danger text-white border rounded">${e.state}</td>`),t+=`<td class="bg-success text-white border rounded">${e.Project}</td>`,t+=`\n      <td>${e.date_end}</td>\n      <td id="delete__task" onclick="deleteTask(${e.id});" class="mx-2 btn btn-danger bg-danger border rounded"><i class="fa-solid fa-trash-can"></i></td>\n      <td class="btn btn-danger bg-primary border rounded"><a href="/tarea?id=${e.id}" class="text-white"><i class="fa-solid fa-pen-to-square"></i></a></td>\n\n      </tr>`)}),n.innerHTML=t}async function deleteTask(e){await deleteAny(e,"Tasks"),getTasksPaginate()}async function deleteProject(e){await deleteAny(e,"Projects"),getProjectsPaginate()}function buildProjects(e){let t="";const n=document.querySelector("#content_projects");e.forEach(e=>{null!=e&&(t+="\n      <tr>\n      ","ALTA"==e.priority&&(t+=`<td class="bg-danger text-white border rounded">${e.priority}</td>`),"BAJA"==e.priority&&(t+=`<td class="bg-primary text-white border rounded">${e.priority}</td>`),"MEDIA"==e.priority&&(t+=`<td class="bg-secondary text-white border rounded">${e.priority}</td>`),t+=`<td>${e.name}</td>`,"EN PROCESO"==e.state&&(t+=`<td class="bg-secondary text-white border rounded">${e.state}</td>`),"REALIZADO"==e.state&&(t+=`<td class="bg-success text-white border rounded">${e.state}</td>`),"CANCELADO"==e.state&&(t+=`<td class="bg-danger text-white border rounded">${e.state}</td>`),t+=`\n              <td class=" w-10 text-white border rounded">\n                <a href="/seguidor?id=${e.userID}">\n                  <img class="rounded-circle w-75 img-responsive" src="/build/img/${e.avatar}">\n                  </img>\n                </a>\n              </td>`,t+=`\n      <td>${e.date_end}</td>\n      <td id="delete__project" onclick="deleteProject(${e.id});" class="mx-2 btn btn-danger bg-danger border rounded"><i class="fa-solid fa-trash-can"></i></td>\n      <td class="btn btn-danger bg-primary border rounded"><a href="/proyecto?id=${e.id}&limit=5&page=1" class="text-white"><i class="fa-solid fa-pen-to-square"></i></a></td>\n\n      </tr>`)}),n.innerHTML=t}function buildMembers(){const e=document.querySelector("#current_id_user");let t=Number(e.getAttribute("data-id")),n="",a=getParameterByName("id");const s=document.querySelector("#teams__container");getMembers(a).then(e=>{e.forEach(e=>{n+=`\n                     <div class="col-5 d-flex justify-content-center">\n                        <nav class="navbar navbar-expand-sm">\n                            <ul class="navbar-nav">\n                                <li class="nav-item dropdown ">\n                                    <a class="nav-link dropdown-toggle d-flex justify-content-center" href="/seguidor?id=${e.id}" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n                                      <img class="rounded-circle w-40 img-responsive" src="/build/img/${e.avatar}">\n                                      </img>\n                                    </a>\n                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">\n                                        <li><a class="dropdown-item" href="/seguidor?id=${e.id}">Ver Perfil</a></li>\n                                        \n                                        <li class="d-none">${e.id}</li>\n                                        <li>\n                                            <hr class="dropdown-divider">\n                                        </li>\n\n      `,e.id!=t&&(n+=`                     <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#modal_send_message" onclick="dataMessageGeneral(${e.id});">Enviar mensaje</a></li>`),n+="\n                                    </ul>\n                                </li>\n                            </ul>\n                        </nav>\n                    </div>\n            "}),s.innerHTML=n})}async function getMembers(e){const t=new FormData;let n=window.location.pathname;t.append("id",e),"/proyecto"==n&&t.append("limit",4);const a=await fetch("http://127.0.0.1:8080/api/getMembersByProject",{method:"POST",body:t});return await a.json()}function accept_request_follower(e){$.post("http://127.0.0.1:8080/api/accept-follower",{id_request:e},e=>{e&&(Swal.fire("Nuevo Seguidor","","success"),showFriends(),getRequestsFollow())})}function reject_request_follower(e){null!=e&&$.post("http://127.0.0.1:8080/api/accept-reject",{id_request:e},e=>{e&&getRequestsFollow()})}function send_request_friend(e){null!=e&&$.post("http://127.0.0.1:8080/api/send-resquest-friend",{receiver:e},e=>{Swal.fire(e)})}function search_profile(){if(null!=document.querySelector("#search_profile")){const e=document.querySelector("#btn__search__friends");e.classList.add("d-none");const t=document.querySelector("#search_profile");t.addEventListener("keyup",n=>{let a=t.value.trim();a.length>=3?(e.classList.remove("d-none"),e.classList.add("show")):e.classList.add("d-none"),$.ajax({url:"http://127.0.0.1:8080/api/search-friends-for-name",type:"POST",data:{search:a},success:e=>{if(!e.error&&null!=e){let t=JSON.parse(e),n=!1,a="";t.forEach(e=>{console.log(e);let t=e.id;$.post("http://127.0.0.1:8080/api/check-request-follower",{id:t},t=>{a+=`<div class="d-flex flex-column align-items-center ">\n                                  <img src="/build/img/${e.avatar}" class="img-responsive w-10" alt="avatar" />\n                                  <span>ID: ${e.id}</span>\n  \n                                  <span class="w-75 text-center">Nombre: <span class="text-primary">${e.username}</span></span>`,null!=e.description&&(a+=`\n                              <span class="w-75 text-center">Descripción: <span class="text-primary">${e.description}</span></span>`),null!=e.rol&&(a+=`\n                              <span class="w-75 text-center">Rol: <span class="text-primary">${e.rol}</span></span>`),a+=` <a href="/seguidor?id=${e.id}">Ver perfil</a>`;const s=JSON.parse(t);null!=s?null!=s.isAccept&&(1==s.isAccept?a+='<button type="button"  class="btn btn-primary my-2">\n                                      Seguido\n                                      </button>\n                                      <hr/>':a+=`<button type="button"  onclick="send_request_friend(${e.id});" \n                                    class="btn request_friends btn-secondary my-2">\n                                      Pendiente\n                                    </button>\n                                    <hr/>`):n=!0,n&&(a+=`<button type="button"  onclick="send_request_friend(${e.id});" \n                            class="btn request_friends btn-secondary my-2">\n                                      Seguir\n                            </button>\n                        <hr/>`),n=!1,a+="</div>",$("#content__profiles").html(a)})})}}})})}}function send_response_comment(){let e=window.location.href;document.querySelectorAll(".toogle_response").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.id;$(".response_comment").submit(t=>{t.preventDefault();let a=document.querySelector("#container_post").dataset.id;const s={id_comment_response:n,content:$("#content").val(),post_id:a};$.post("http://127.0.0.1:8080/api/send_response_comment",s,t=>{window.location.href=e})})})})}function deletePost(){$(document).on("click","#delete_post",e=>{if(confirm("¿Seguro que quieres eliminar este post?")){let t=e.target.dataset.id;$.post("http://127.0.0.1:8080/api/post/delete",{id_element:t},e=>{listPosts()})}})}function update_post(){$(document).on("click","#update_post",e=>{let t=e.target.dataset.id;window.location.href="http://127.0.0.1:8080/modificar-post?id="+t})}function deleteFriend(){$(document).on("click",".delete_friend",e=>{if(confirm("¿Estas seguro que quieres eliminar este seguidor?")){let t=e.target.parentElement.parentElement.children[2].textContent;$.post("http://127.0.0.1:8080/api/friends/delete",{id_element:t},e=>{showFriends()})}})}function close_activity_perfil(){const e=document.querySelector("#close_activity_perfil"),t=document.querySelectorAll(".activity_perfil");null!=e&&e.addEventListener("click",(function(){t.forEach(t=>{t.classList.toggle("d-none"),t.classList.contains("d-none")?e.textContent="mostrar":e.textContent="ocultar"})}))}async function showFriends(){let e=window.location.pathname;try{const t="http://127.0.0.1:8080/api/friends",n=await fetch(t),a=await n.json();"/seguidores"==e&&createFriendsList(a[1],a[0])}catch(e){console.log(e)}}function copyToClipboard(){const e=document.querySelector(".share");let t=e.dataset.text;e.addEventListener("click",()=>{navigator.clipboard.writeText(t).then(()=>{Swal.fire("Copiado correctamente")})})}async function listPosts(){let e=window.location.pathname;if("/posts"==e||"/perfil"==e)try{const e="http://127.0.0.1:8080/api/posts",t=await fetch(e),n=await t.json(),a=document.querySelector("#wrap-articles");template="",n.length>0?n.forEach(e=>{let t="https://www.youtask.es/post?id="+e.id;template+=`\n                    <article class="wrap-article m-2 d-flex flex-column">\n                        \n                        <div class="align-self-end">\n                            <button id="update_post" data-id="${e.id}" type="button" class="btn  my-2 btn-primary text-right text-end  " >Modificar</button>\n                            <button id="delete_post" data-id="${e.id}" type="button" class="btn  my-2 btn-danger text-right text-end" >Eliminar</button>\n                            \n                        </div>\n                        \n                        \n                        <span class="text-right d-block w-100 text-end">${e.create_at}</span>\n                        <h3><a class="text-decoration-none text-dark text-capitalize" href="/post?id=${e.id}">${e.name}</a></h3>\n                        <p>\n                            ${e.content.substring(0,500)}\n\n\n                            <a  href="/post?id=${e.id}"><svg class="mx-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal icon-lg text-muted pb-3px">\n                                    <circle cx="12" cy="12" r="1"></circle>\n                                    <circle cx="19" cy="12" r="1"></circle>\n                                    <circle cx="5" cy="12" r="1"></circle>\n                                </svg></a>\n                            </span>\n                        </p>\n                        <div>\n                            <div class="d-flex post-actions">\n                                \n                                <a href="javascript:;" class="d-flex mx-2 align-items-center text-muted">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-share icon-md">\n                                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>\n                                        <polyline points="16 6 12 2 8 6"></polyline>\n                                        <line x1="12" y1="2" x2="12" y2="15"></line>\n                                    </svg>\n                                    <p class="d-none share d-md-block ml-2" data-text="${t}" onclick="copyToClipboard();">Compartir</p>\n                                </a>\n                            </div>\n                        </div>\n                    </article>\n                    <hr/>\n                    `}):template="<div><span>No hay artículos</span></div>","/perfil"===location.pathname&&(template+=' \n                <div class="d-flex justify-content-center mt-5">\n                    <button class="btn btn-secondary" onclick="window.location.href=\'/posts\'">Ver más</button>\n                </div>\n                '),a.innerHTML=template}catch(e){console.log(e)}}function createFriendsList(e,t){const n=document.querySelector("#container_friends")??0;(document.querySelector("#countFriends")??0).textContent="Lista de seguidores ("+t+")";let a="";e.length>0?e.forEach(e=>{a+=`\n            <div class="col-12 col-md-5 border rounded shadow m-2">\n                <div class="row">\n                    <div class="col-3" id="">\n                        <img id="avatar" src="/build/img/${e.avatar}" alt="avatar" srcset="" class="img-fluid m-2">\n                    </div>\n                    <div class="col-4 d-flex justify-content-center align-items-center">\n                        <span id="friend_username">${e.username}</span>\n                    </div>\n                    <div class="col-5 d-flex">\n                        <nav class="navbar navbar-expand-sm">\n                            <ul class="navbar-nav">\n                                <li class="nav-item dropdown">\n                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n                                        Acciones\n                                    </a>\n                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">\n                                        <li><a class="dropdown-item" href="/seguidor?id=${e.id}">Ver Perfil</a></li>\n                                        <li><a class="dropdown-item delete_friend" href="#">Eliminar</a></li>\n                                        <li class="d-none">${e.id}</li>\n                                        <li>\n                                            <hr class="dropdown-divider">\n                                        </li>\n                                        <li><a class="dropdown-item" href="#">Enviar mensaje</a></li>\n                                    </ul>\n                                </li>\n                            </ul>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n            `}):a='<p class="text-center text-danger">No tienes seguidores agregados</p>',n.innerHTML=a}function showCreateProject(){const e=document.querySelector("#create_project"),t=document.querySelector("#wrap_initials"),n=document.querySelector("#wrap_create_project");null!=document.querySelector("#create_project")?null!=e?e.addEventListener("click",()=>{t.remove(),n.classList.add("show_wrap_create_project")}):n.classList.add("show_wrap_create_project"):null!=document.querySelector("#wrap_create_project")&&n.classList.add("show_wrap_create_project")}function checkPassword(){const e=document.querySelector("#password"),t=document.querySelector("#repeatPassword"),n=document.querySelector("#btn-register"),a=document.querySelector("#privacity");null!=a&&a.addEventListener("change",(function(){a.checked&&e.value==t.value&&n.classList.toggle("d-flex")}))}function checkAlerts(){if(document.querySelectorAll(".alerts")){document.querySelectorAll(".alerts").forEach(e=>{setTimeout(()=>{e.remove()},6e3)})}}function showMenuResponse(){const e=document.querySelector(".fa-bars"),t=document.querySelector(".nav__menu"),n=document.querySelector(".nav__list");null!=e&&e.addEventListener("click",()=>{t.classList.toggle("d-flex"),n.classList.toggle("flex-column")})}document.addEventListener("DOMContentLoaded",(function(){let e=window.location.pathname;checkPassword(),checkAlerts(),showMenuResponse(),showCreateProject(),close_activity_perfil(),deleteFriend(),listPosts(),deletePost(),update_post(),send_response_comment(),getRequestsFollow(),storage(),previewImg(),"/seguidores"==e&&(showFriends(),search_profile()),"/editar-perfil"==e&&getSkills(),"/mensajes"==e&&showContacts(),"/proyectos"==e&&(getProjectsPaginate(),getEntityByName("Projects")),"/proyecto"==e&&(buildMembers(),getMessagesProjects(),getListByProject(),loadBtnUploadFileProject(),searchMembers(),getTasksPaginate(),getEntityByName("Tasks"),setInterval(()=>{getMessagesProjects()},9500)),"/tareas"==e&&(getTasksPaginate(),getEntityByName("Tasks")),"/tarea"==e&&(loadBtnUploadFileProject(),showMessagesTask(),setInterval(()=>{showMessagesTask()},9500)),"/miembros-proyecto"==e&&(searchMembers(),getAllMembersProject())}));